{% extends 'base.html.twig' %}

{% block title %}Checkout - e-sports.tn{% endblock %}

{% block body %}

<!-- --- Checkout Page Styles --- -->
<style>
.checkout-section {
    background-color: #ffffff;
    padding: 70px 0;
    font-family: 'Open Sans', sans-serif;
}

.checkout-section h2 {
    font-size: 2.1rem;
    font-weight: 700;
    color: #111;
}

.checkout-section h4 {
    font-size: 1.2rem;
    font-weight: 700;
    color: #111;
}

.form-label {
    font-weight: 600;
    font-size: 0.85rem;
    color: #555;
    margin-bottom: 6px;
}

.gaming-input {
    background: #fff;
    border: 1px solid #e6e6e6;
    border-radius: 8px;
    padding: 11px 14px;
    font-size: 0.9rem;
    color: #333;
    transition: 0.25s ease;
}

.gaming-input:focus {
    border-color: #054397;
    box-shadow: 0 0 0 3px rgba(5, 67, 151, 0.08);
    outline: none;
}

.checkout-summary-card {
    background: #ffffff;
    border-radius: 16px;
    padding: 28px;
    border: 1px solid #ededed;
    box-shadow: 0 8px 25px rgba(0,0,0,0.04);
}

.summary-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    font-size: 0.9rem;
    color: #000000;
}

.summary-item strong {
    font-weight: 600;
}

.summary-total {
    border-top: 1px solid #000000;
    padding-top: 18px;
    margin-top: 18px;
}

.payment-option {
    border: 1px solid #000000;
    border-radius: 10px;
    padding: 13px 15px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: 0.25s ease;
    display: flex;
    align-items: center;
    background: #000000;
}

.payment-option.active {
    border-color: #054397;
    background: #000000;
}

.payment-option input {
    margin-right: 10px;
    accent-color: #054397;
}

.btn-place-order {
    background: #000000;
    color: #ffffff;
    width: 100%;
    padding: 14px;
    border-radius: 10px;
    font-weight: 700;
    text-transform: uppercase;
    border: none;
    letter-spacing: 0.8px;
    font-size: 0.9rem;
    transition: 0.25s ease;
    margin-top: 18px;
}

.btn-place-order:hover {
    background: #054397;
    box-shadow: 0 8px 18px rgba(5, 67, 151, 0.18);
}
</style>

<section class="checkout-section">
    <div class="container">
        <div class="mb-5 text-center">
            <h2 class="fw-bold" style="font-size: 2.5rem; color: #111;">Checkout</h2>
            <p class="text-muted">Complete your order to gear up.</p>
        </div>

        <div class="row g-5">
            <!-- Billing Details -->
            <div class="col-lg-7">
                <h4 class="mb-4 fw-bold">Billing Details</h4>
                <form>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">First Name</label>
                            <input type="text" class="form-control gaming-input" placeholder="John">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Last Name</label>
                            <input type="text" class="form-control gaming-input" placeholder="Doe">
                        </div>
                        <div class="col-12">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-control gaming-input" placeholder="john@example.com">
                        </div>
                        <div class="col-12">
                            <label class="form-label">Street Address</label>
                            <input type="text" class="form-control gaming-input" placeholder="123 Gaming St.">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Town / City</label>
                            <input type="text" class="form-control gaming-input">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Postcode / ZIP</label>
                            <input type="text" class="form-control gaming-input">
                        </div>
                        <div class="col-12">
                            <label class="form-label">Phone</label>
                            <input type="tel" class="form-control gaming-input" placeholder="+216 ** *** ***">
                        </div>
                    </div>
                </form>
            </div>

            <!-- Order Summary -->
            <div class="col-lg-5">
                <div class="checkout-summary-card">
                    <h4 class="mb-4 fw-bold">Your Order</h4>
                    
                    {% set total = 0 %}
                    {% for item in cartItems %}
                        {% set total = total + item.getSubtotal() %}
                        <div class="summary-item">
                            <span>{{ item.product.name }} <strong class="ms-2">x {{ item.quantity }}</strong></span>
                            <span class="fw-bold">${{ item.getSubtotal() }}</span>
                        </div>
                    {% else %}
                        <p>No items in cart.</p>
                    {% endfor %}

                    <div class="summary-total">
                        <div class="summary-item mb-2">
                            <span class="text-muted">Subtotal</span>
                            <span class="fw-bold">${{ total }}</span>
                        </div>
                        <div class="summary-item mb-2">
                            <span class="text-muted">Shipping</span>
                            <span class="fw-bold text-success">Free</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <span class="h5 fw-bold mb-0">Total</span>
                            <span class="h4 fw-bold mb-0" style="color:#054397;">${{ total }}</span>
                        </div>
                    </div>

                    <div class="mt-4 mb-4">
                        <label class="form-label mb-3">Payment Method</label>
                        
                        <div class="payment-option active" onclick="selectPayment(this)">
                            <input type="radio" name="payment" checked>
                            <span class="fw-bold ms-2">Credit Card</span>
                            <i class="far fa-credit-card ms-auto text-muted"></i>
                        </div>
                        
                        <div class="payment-option" onclick="selectPayment(this)">
                            <input type="radio" name="payment">
                            <span class="fw-bold ms-2">PayPal</span>
                            <i class="fab fa-paypal ms-auto text-muted"></i>
                        </div>

                        <div class="payment-option" onclick="selectPayment(this)">
                            <input type="radio" name="payment">
                            <span class="fw-bold ms-2">Cash on Delivery</span>
                            <i class="fas fa-money-bill-wave ms-auto text-muted"></i>
                        </div>
                    </div>

                    <button class="btn-place-order">Place Order</button>
                    
                    <p class="text-muted small text-center mt-3">
                        <i class="fas fa-lock me-1"></i> Secure Checkout
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
function selectPayment(element) {
    document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.payment-option input').forEach(input => input.checked = false);
    element.classList.add('active');
    element.querySelector('input').checked = true;
}
</script>

{% endblock %}
